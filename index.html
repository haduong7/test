<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>What Drug Are You</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.cdnfonts.com/css/studio-ghibli" rel="stylesheet">
  <style>
    body {
        margin: 0;
        font-family: 'Studio Ghibli', serif;
        background-color: #c0e7c9;
        color: #333;
        display: flex;
        flex-direction: column;
        justify-content: center;
        min-height: 100vh;
    }

    .container {
        max-width: 100%;
        padding: 1rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        flex-grow: 1;
        position: relative;
    }

    button[value="no"] {
        position: absolute;
    }


    header {
      text-align: center;
      margin-bottom: 2rem;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .question {
      margin-bottom: 2rem;
      font-family: 'Studio Ghibli', serif;
      text-align: center;
    }

    label {
      display: block;
      margin-bottom: 1rem;
      font-size: 1.4rem;
      text-align: center;
    }

    .question img {
      width: 80%;
      max-width: 300px;
      border-radius: 10px;
      margin-bottom: 1.5rem;
    }

    .choices {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      width: 100%;
      max-width: 300px;
      margin: 0 auto;
    }

    button {
      padding: 0.8rem 1.2rem;
      font-size: 1rem;
      border-radius: 12px;
      border: none;
      background-color: #ffeed6;
      font-family: 'Studio Ghibli', serif;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    button:hover {
      background-color: #ffe3b0;
    }

    #result {
      margin-top: 2rem;
      padding: 1rem;
      background-color: #fff0f5;
      border-radius: 1rem;
      text-align: center;
      font-size: 1.4rem;
    }

    .hidden {
      display: none;
    }

    #loadingOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      backdrop-filter: blur(6px);
      background: rgba(255, 255, 255, 0.3);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      visibility: hidden;
    }

    #loadingBar {
      width: 60%;
      height: 20px;
      background: #eee;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }

    #loadingBarFill {
      width: 0%;
      height: 100%;
      background: linear-gradient(90deg, #ffd6e0, #ffc0cb, #ffb6c1);
      animation: fillBar 4s linear forwards;
    }

    @keyframes fillBar {
      0% { width: 0%; }
      100% { width: 100%; }
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 1.5rem;
      }
      button {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header id="intro">
      <h1>What Drug Are You</h1>
      <p>A chaotic journey to discover your true drug-like essence ‚Äî metaphorically, of course. üíä</p>
      <button onclick="startSurvey()">Start ‚ú®</button>
    </header>

    <section id="survey" class="hidden">
      <form id="quizForm">
        <div id="questionContainer"></div>
        <div id="result" class="hidden"></div>
      </form>
    </section>
  </div>

  <div id="loadingOverlay">
    <div id="loadingBar">
      <div id="loadingBarFill"></div>
    </div>
  </div>

  <script>
    const questions = [
      {
        text: "What‚Äôs your ideal Friday night?",
        image: "img/sample-question.png",
        answers: [
          { text: "Out until 4am in a place with neon lights and regrettable decisions", value: "mdma" },
          { text: "In your room, deeply focused on a creative project you‚Äôll abandon by Sunday", value: "nicotine" },
          { text: "Laying in bed thinking about the universe and your 7th grade nemesis", value: "lsd" },
          { text: "Dancing barefoot in the kitchen with someone you‚Äôre in love with", value: "weed" },
          { text: "Lost in a random forest for 3 hours and somehow okay with it", value: "mushrooms" },
          { text: "Telling strangers your deepest secrets in a dive bar bathroom", value: "caffeine" }
        ]
      },
      {
        text: "Pick a color that *feels* like your inner world:",
        image: "img/sample-question.png",
        answers: [
          { text: "Electric blue", value: "mdma" },
          { text: "Soft lavender", value: "weed" },
          { text: "Black with gold specks", value: "lsd" },
          { text: "Warm orange", value: "mushrooms" },
          { text: "Shimmery green", value: "nicotine" },
          { text: "Deep burgundy", value: "caffeine" }
        ]
      },
      {
        text: "Which quote hits a little too close?",
        image: "img/sample-question.png",
        answers: [
          { text: "Chaos is a ladder.", value: "caffeine" },
          { text: "I am a deeply sentimental lunatic with no chill.", value: "mdma" },
          { text: "Reality is a shared hallucination.", value: "lsd" },
          { text: "Love is stored in the weird little moments.", value: "weed" },
          { text: "I felt myself dissolve into everything.", value: "mushrooms" },
          { text: "I have no idea what I‚Äôm doing, but I‚Äôm doing it loud.", value: "nicotine" }
        ]
      },
      {
        text: "Your friends would describe you as:",
        image: "img/sample-question.png",
        answers: [
          { text: "Wild, impulsive, lowkey legendary", value: "mdma" },
          { text: "Mysterious, overthinking, oddly wise", value: "nicotine" },
          { text: "Quietly intense, says little but sees everything", value: "lsd" },
          { text: "Sweet, romantic, always the playlist curator", value: "weed" },
          { text: "Ethereal, weird, probably barefoot", value: "mushrooms" },
          { text: "Dramatic, emotional, strangely convincing", value: "caffeine" }
        ]
      },
      {
        text: "Your dream aesthetic is:",
        image: "img/sample-question.png",
        answers: [
          { text: "Futuristic rave meets post-apocalypse", value: "mdma" },
          { text: "Midnight library with candles and secrets", value: "nicotine" },
          { text: "Film noir protagonist who knows too much", value: "lsd" },
          { text: "Cottagecore meets soul-searching playlists", value: "weed" },
          { text: "Celestial forest fairy who forgot how to speak English", value: "mushrooms" },
          { text: "Gritty 90s indie film character in crisis", value: "caffeine" }
        ]
      },
      {
        text: "Pick your poison (metaphorically...):",
        image: "img/sample-question.png",
        answers: [
          { text: "Instant gratification", value: "mdma" },
          { text: "Artistic obsession", value: "nicotine" },
          { text: "Hyperawareness", value: "lsd" },
          { text: "Affection", value: "weed" },
          { text: "Dissociation", value: "mushrooms" },
          { text: "Self-sabotage, but with flair", value: "caffeine" }
        ]
      },
      {
        text: "One word to describe your vibe:",
        image: "img/sample-question.png",
        answers: [
          { text: "Electric", value: "mdma" },
          { text: "Brooding", value: "nicotine" },
          { text: "Intense", value: "lsd" },
          { text: "Warm", value: "weed" },
          { text: "Cosmic", value: "mushrooms" },
          { text: "Messy", value: "caffeine" }
        ]
      },

      {
        text: "Final Question: Would you like to be my girlfriend?",
        image: "img/sample-question.png",
        answers: [
          { text: "Yes üíñ", value: "yes" },
          { text: "No üò¢", value: "no" }
        ]
      }

    ];

    let currentQuestion = 0;
    const scores = { ghibli: 0, anime: 0, cartoon: 0 };
    let noClickCount = 0;

    let noButtonInterval;
    function startFlyingNoButton() {
        const noButton = document.querySelector('button[value="no"]');
        function moveRandomly() {
        const maxX = window.innerWidth - noButton.offsetWidth;
        const maxY = window.innerHeight - noButton.offsetHeight;
        const randX = Math.random() * maxX;
        const randY = Math.random() * maxY;
        noButton.style.left = `${randX}px`;
        noButton.style.top = `${randY}px`;
        }
        moveRandomly();
        noButtonInterval = setInterval(moveRandomly, 1000);
    }

    function startSurvey() {
      document.getElementById('intro').classList.add('hidden');
      document.getElementById('survey').classList.remove('hidden');
      showQuestion();
    }

    function handleAnswer(value) {
      if (value === 'yes') {
        showFinalResult(value);
        return;
      }

      if (value === 'no') {
        handleNoClick();
        return;
      }

      scores[value]++;
      currentQuestion++;
      if (currentQuestion < questions.length) {
        showQuestion();
      }
    }

    function showQuestion() {
      const container = document.getElementById('questionContainer');
      container.innerHTML = '';
      const q = questions[currentQuestion];
      const qDiv = document.createElement('div');
      qDiv.className = 'question';

      const label = document.createElement('label');
      label.textContent = q.text;
      qDiv.appendChild(label);

      const image = document.createElement('img');
      image.src = q.image;
      image.alt = 'Question Image';
      qDiv.appendChild(image);

      const choicesDiv = document.createElement('div');
      choicesDiv.className = 'choices';

      q.answers.forEach(answer => {
        const btn = document.createElement('button');
        btn.textContent = answer.text;
        btn.onclick = (e) => {
          e.preventDefault();
          handleAnswer(answer.value);
        };

        if (answer.value === 'yes') {
          btn.style.backgroundColor = '#b2f2bb';
        } else if (answer.value === 'no') {
          btn.style.backgroundColor = '#ffc9c9';
        }

        choicesDiv.appendChild(btn);
      });

      qDiv.appendChild(choicesDiv);
      container.appendChild(qDiv);
    }

    function showFinalResult(finalAnswer) {
      const container = document.getElementById('questionContainer');
      const resultDiv = document.getElementById('result');
      container.innerHTML = '';
      resultDiv.classList.add('hidden');

      const overlay = document.getElementById('loadingOverlay');
      const fillBar = document.getElementById('loadingBarFill');

      fillBar.style.animation = 'none';
      void fillBar.offsetWidth;
      fillBar.style.animation = 'fillBar 4s linear forwards';

      overlay.style.visibility = 'visible';

      setTimeout(() => {
        window.location.href = 'gallery.html';
      }, 4000);
    }

    function handleNoClick() {
      const resultDiv = document.getElementById('result');
      resultDiv.classList.remove('hidden');
      resultDiv.innerHTML = '';

      noClickCount++;

      const buttons = document.querySelectorAll('#questionContainer button');
      const yesButton = buttons[0];
      const noButton = buttons[1];

      yesButton.style.transform = `scale(${1 + noClickCount * 0.1})`;

      const messages = [
        "Are you sure? üò¢",
        "Really sure? üò≠",
        "I'll wait... üíî",
        "But we‚Äôd be so cute together ü•∫",
        "Think about the adventures ‚ú®",
        "Don't break Totoro's heart üêª",
        "Maybe give it one more thought? üò∂‚Äçüå´Ô∏è",
        "I made this whole site for you... üò≥",
        "What if we‚Äôre soulmates in every universe? üåå",
        "Last chance before I cry in a field of flowers üå∏üò≠"
      ];

      const encouragements = [
        "üò¢ Even in another universe, I‚Äôd still choose you. But I won‚Äôt give up just yet.",
        "ü•∫ You're making this hard for me... but I'm still here.",
        "üíó I can wait a little longer, even if my heart can't.",
        "üåßÔ∏è This hurts a little, but I still believe in us.",
        "üíå Every love story needs a turning point, right?",
        "üïäÔ∏è In a Ghibli world, you'd already have said yes...",
        "‚è≥ I'm staying hopeful. Just a little longer.",
        "üìñ This story could be magical‚Äîjust say yes?",
        "üåô Every universe is better with you in it.",
        "üå∏ My heart‚Äôs still holding on. Could you?"
      ];

      if (noClickCount <= messages.length) {
        noButton.textContent = messages[noClickCount - 1];
        resultDiv.innerHTML = encouragements[noClickCount - 1];
      } else {
        noButton.textContent = "Okay... I‚Äôll still cherish this moment üíî";
        resultDiv.innerHTML = "Thank you for exploring this universe with me, even if it ends here.";

        noButton.style.position = 'absolute';
        noButton.style.transition = 'top 0.1s, left 0.1s';

        const container = document.getElementById('questionContainer');
        const corners = [
          [20, 20],
          [window.innerWidth - 120, 20],
          [20, window.innerHeight - 120],
          [window.innerWidth - 120, window.innerHeight - 120]
        ];

        container.addEventListener('mousemove', (e) => {
          const triggerZoneSize = 120;
          const noRect = noButton.getBoundingClientRect();
          const cursorX = e.clientX;
          const cursorY = e.clientY;

          const triggerZone = {
            left: noRect.left - triggerZoneSize,
            top: noRect.top - triggerZoneSize,
            right: noRect.right + triggerZoneSize,
            bottom: noRect.bottom + triggerZoneSize
          };

          if (
            cursorX > triggerZone.left &&
            cursorX < triggerZone.right &&
            cursorY > triggerZone.top &&
            cursorY < triggerZone.bottom
          ) {
            const safeCorners = corners.filter(([x, y]) => {
              return Math.abs(cursorX - x) > 200 && Math.abs(cursorY - y) > 200;
            });

            const [newX, newY] = safeCorners[Math.floor(Math.random() * safeCorners.length)] || corners[0];
            noButton.style.left = `${newX}px`;
            noButton.style.top = `${newY}px`;
          }
        });
      }
    }
  </script>
</body>
</html>
